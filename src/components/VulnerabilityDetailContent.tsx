import Link from "next/link";
import { HiArrowLeft } from "react-icons/hi2";
import { VulnerabilityDetail } from "@/components/VulnerabilityDetail";
import { getVulnerabilityById } from "@/server";
import type { VulnerabilityDetailContentProps } from "@/types";
import { NoVulnFound } from "./NoVulnFound";

export const VulnerabilityDetailContent = async ({
  params,
}: VulnerabilityDetailContentProps) => {
  const { id } = await params;
  const decodedId = decodeURIComponent(id);

  const { code, vulnerability } = await getVulnerabilityById(decodedId);

  return (
    <>
      <Link
        href="/"
        className="inline-flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 mb-6 transition-colors"
      >
        <HiArrowLeft className="w-5 h-5" />
        <span className="font-medium">Back to Home</span>
      </Link>
      {!!code && vulnerability ? (
        <VulnerabilityDetail vulnerability={vulnerability} />
      ) : (
        <NoVulnFound />
      )}
    </>
  );
};
